@startuml
title Device Service Code Diagram

top to bottom direction

class CommandHandler {
  +executeCommand(deviceId: String, command: String)
}

class User {
  +String name
  +String email
  +void register()
  +void login()
}

class Scenario {
  +String id
  +String name
  +String deviceId
  +List<Step> steps
  +void execute()
}

class Step {
  +String deviceId
  +String action
  +void perform()
}

class ScenarioUsecase {
  +createScenario(scenario: Scenario)
  +executeScenario(scenarioId: String)
}

class Device {
  +String id
  +String userId
  +String type
  +String name
  +String status
  +void updateStatus(status: String)
}

class DeviceUsecase {
  +addDevice(device: Device)
  +removeDevice(deviceId: String)
  +updateDevice(device: Device)
}

class DatabaseStorage {
  +saveDevice(device: Device)
  +getDeviceById(deviceId: String)
  +saveScenario(scenario: Scenario)
  +getScenarioById(scenarioId: String)
}

ScenarioUsecase --> Scenario : manages
Scenario "1" -- "0..*" Step : includes
Device "1" -- "0..*" Scenario: has
ScenarioUsecase --> CommandHandler : triggers commands
User --> CommandHandler : triggers commands
DeviceUsecase --> Device : manages
DatabaseStorage --> Device : stores
DatabaseStorage --> Scenario : stores
@enduml